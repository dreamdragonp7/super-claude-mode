---
description: Generate repository documentation - repo-map.md, feature-map.md, NOW.md
---

# Atlas: Documentation Generator

Generate self-documenting codebase files that help Claude understand any project. Atlas reads patterns.yaml to show feature gaps and generates structured docs.

**This is separate from ARCHITECTURE.md** (which is auto-generated by /audit).

---

## What Atlas Generates

| File | Purpose | Update Frequency |
|------|---------|------------------|
| docs/repo-map.md | Module structure and entry points | On significant changes |
| docs/feature-map.md | Feature â†’ files mapping | When features change |
| docs/NOW.md | Current focus and active work | Weekly or as needed |

---

## Step 1: Create docs/ Directory

```bash
mkdir -p docs/decisions docs/taskcaps
```

---

## Step 2: Generate docs/repo-map.md

Scan the project structure and create:

```markdown
# Repository Map

Generated: [date]

## Project Type
[Detected: pnpm monorepo / Python package / etc.]

## Structure

```
[directory tree, 2-3 levels deep]
```

## Entry Points

| Entry | Path | Purpose |
|-------|------|---------|
| API | apps/api/main.py | FastAPI application |
| Web | apps/web/src/app/page.tsx | Next.js frontend |
| CLI | [if exists] | Command-line interface |

## Key Modules

| Module | Path | Responsibility |
|--------|------|----------------|
| core | core/ | Business logic, domain models |
| apps | apps/ | Application layer (API, web) |
| infra | infrastructure/ | External service integrations |

## Configuration

| Config | Path | Purpose |
|--------|------|---------|
| pyproject.toml | ./ | Python dependencies |
| package.json | apps/web/ | Node dependencies |
| patterns.yaml | ./ | Architecture patterns |
| .env.example | ./ | Environment template |

## Patterns

Patterns defined in patterns.yaml:
- [List feature types]
- [List component patterns]
- [List boundary rules]
```

---

## Step 3: Generate docs/feature-map.md

Read patterns.yaml for feature types, then scan codebase:

```markdown
# Feature Map

Generated: [date]
Source: patterns.yaml + codebase scan

## Features

### [Feature Name]
- **Status**: stable / development / planned
- **Type**: [from patterns.yaml: full-stack, api-only, etc.]
- **Entry**: path/to/entrypoint
- **Files**:
  - path/to/impl.py âœ“
  - path/to/component.tsx âœ“
  - path/to/test.py âœ— (missing)
- **Compliance**: 80% (2/2 required, 0/1 optional)

### [Another Feature]
...

## Feature Health Summary

| Feature | Type | Required | Optional | Status |
|---------|------|----------|----------|--------|
| auth | full-stack | 5/5 âœ“ | 2/3 | âœ… |
| payments | full-stack | 3/5 | 0/3 | âš ï¸ |
| trajectory | api-only | 3/3 âœ“ | 1/1 âœ“ | âœ… |

## Planned Features (from patterns.yaml)

Features defined in patterns.yaml but not yet implemented:
- [feature-type] [name] - [description]

## Gaps

Features that exist but don't match any pattern:
- path/to/orphan-feature/ (no pattern match)
```

---

## Step 4: Update docs/NOW.md

Prompt user for current focus using AskUserQuestion:

**Questions:**
1. "What are you working on this week?" (text)
2. "Any open PRs or issues?" (text)
3. "Any blockers?" (text)
4. "What's coming next?" (text)

Generate:

```markdown
# Current Focus

Updated: [date]

## This Week
- [Priority 1 from user input]
- [Priority 2 from user input]

## Active Threads
- PR #123: [description]
- Issue #456: [description]

## Blockers
- [Blocker if any, or "None"]

## Next Up
- [Future priority from user input]

## Recent Task Capsules
[List recent capsules from docs/taskcaps/]
```

---

## Integration with patterns.yaml

Atlas reads patterns.yaml to:

1. **Know what features SHOULD exist** (feature_types section)
2. **Know what files each feature needs** (files/tests sections)
3. **Show gaps** between defined patterns and reality
4. **Highlight orphaned code** that doesn't match any pattern

This makes feature-map.md a **gap analysis**, not just an inventory.

---

## Usage

Run `/atlas` when:
- Starting work on a new project
- After significant refactoring
- When onboarding new team members
- When Claude seems confused about structure
- After adding features to patterns.yaml

---

## Output Summary

After running /atlas:

```
ğŸ“š Atlas Documentation Generated
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

docs/repo-map.md
â”œâ”€â”€ Project type: pnpm monorepo
â”œâ”€â”€ Entry points: 3 (API, Web, Mobile)
â”œâ”€â”€ Key modules: 4
â””â”€â”€ Config files: 5

docs/feature-map.md
â”œâ”€â”€ Features tracked: 8
â”œâ”€â”€ Full compliance: 5
â”œâ”€â”€ Gaps found: 3
â””â”€â”€ Orphaned code: 1 directory

docs/NOW.md
â”œâ”€â”€ Current focus: [summary]
â”œâ”€â”€ Active PRs: 2
â””â”€â”€ Blockers: none

Run /audit for detailed compliance check.
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

---

## Relationship to Other Commands

| Command | Output | Purpose |
|---------|--------|---------|
| /atlas | docs/*.md | Human-readable project docs |
| /audit | ARCHITECTURE.md | Machine-readable reality snapshot |
| /planning | patterns.yaml | Ideal state definition |

**Atlas is for DOCUMENTATION. Audit is for COMPLIANCE.**
